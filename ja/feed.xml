<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Kubernetes â€“ ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã®ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†åŸºç›¤</title><link>https://kubernetes.io/ja/</link><description>The Kubernetes project blog</description><generator>Hugo -- gohugo.io</generator><image><url>https://raw.githubusercontent.com/kubernetes/kubernetes/master/logo/logo.png</url><title>Kubernetes.io</title><link>https://kubernetes.io/ja/</link></image><atom:link href="https://kubernetes.io/ja/feed.xml" rel="self" type="application/rss+xml"/><item><title>Blog: æ›´æ–°: dockershimã®å‰Šé™¤ã«é–¢ã™ã‚‹FAQ</title><link>https://kubernetes.io/ja/blog/2022/02/17/dockershim-faq/</link><pubDate>Thu, 17 Feb 2022 00:00:00 +0000</pubDate><guid>https://kubernetes.io/ja/blog/2022/02/17/dockershim-faq/</guid><description>
&lt;p>&lt;strong>ã“ã®è¨˜äº‹ã¯2020å¹´ã®å¾ŒåŠã«æŠ•ç¨¿ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒŠãƒ«ã®è¨˜äº‹&lt;a href="https://kubernetes.io/blog/2020/12/02/dockershim-faq/">Dockershim Deprecation FAQ&lt;/a>ã®æ›´æ–°ç‰ˆã§ã™ã€‚
ã“ã®è¨˜äº‹ã«ã¯v1.24ã®ãƒªãƒªãƒ¼ã‚¹ã«é–¢ã™ã‚‹æ›´æ–°ã‚’å«ã¿ã¾ã™ã€‚&lt;/strong>&lt;/p>
&lt;hr>
&lt;p>ã“ã®æ–‡æ›¸ã§ã¯ã€Kubernetesã‹ã‚‰ã® &lt;em>dockershim&lt;/em> ã®å‰Šé™¤ã«é–¢ã™ã‚‹ã‚ˆãã‚ã‚‹è³ªå•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
ã“ã®å‰Šé™¤ã¯Kubernetes v1.20ãƒªãƒªãƒ¼ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦ã¯ã˜ã‚ã¦&lt;a href="https://kubernetes.io/blog/2020/12/08/kubernetes-1-20-release-announcement/">ç™ºè¡¨&lt;/a>ã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚
Kubernetes &lt;a href="https://kubernetes.io/releases/#release-v1-24">v1.24ã®ãƒªãƒªãƒ¼ã‚¹&lt;/a>ã«ãŠã„ã¦dockershimã¯å®Ÿéš›ã«Kubernetesã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚&lt;/p>
&lt;p>ã“ã‚ŒãŒä½•ã‚’æ„å‘³ã™ã‚‹ã‹ã«ã¤ã„ã¦ã¯ã€ãƒ–ãƒ­ã‚°è¨˜äº‹&lt;a href="https://kubernetes.io/ja/blog/2020/12/02/dont-panic-kubernetes-and-docker/">Don't Panic: Kubernetes and Docker&lt;/a>ã‚’ã”è¦§ãã ã•ã„ã€‚&lt;/p>
&lt;p>&lt;a href="https://kubernetes.io/ja/docs/tasks/administer-cluster/migrating-from-dockershim/check-if-dockershim-removal-affects-you/">dockershimå‰Šé™¤ã®å½±éŸ¿ç¯„å›²ã‚’ç¢ºèªã™ã‚‹&lt;/a>ã‚’ãŠèª­ã¿ã„ãŸã ãã“ã¨ã§ã€
dockershimã®å‰Šé™¤ãŒã‚ãªãŸã‚„ã‚ãªãŸã®çµ„ç¹”ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’ã”åˆ¤æ–­ã„ãŸã ã‘ã¾ã™ã€‚&lt;/p>
&lt;p>Kubernetes 1.24ãƒªãƒªãƒ¼ã‚¹ã«è‡³ã‚‹ã¾ã§ã®é–“ã€Kubernetesã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ã¯ã“ã®ç§»è¡Œã‚’å††æ»‘ã«è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«å°½åŠ›ã—ã¦ãã¾ã—ãŸã€‚&lt;/p>
&lt;ul>
&lt;li>ç§ãŸã¡ã®&lt;a href="https://kubernetes.io/blog/2022/01/07/kubernetes-is-moving-on-from-dockershim/">ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—&lt;/a>ã‚’è©³è¿°ã—ãŸãƒ–ãƒ­ã‚°è¨˜äº‹ã€‚&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/ja/docs/setup/production-environment/container-runtimes/#container-runtimes">ä»–ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ &lt;/a>ã¸ã®ç§»è¡Œã«å¤§ããªéšœå®³ãŒã‚ã‚‹ã‹ã©ã†ã‹ã®ãƒã‚§ãƒƒã‚¯ã€‚&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/ja/docs/tasks/administer-cluster/migrating-from-dockershim/">dockershimã‹ã‚‰ã®ç§»è¡Œ&lt;/a>ã‚¬ã‚¤ãƒ‰ã®è¿½åŠ ã€‚&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/node/topics-on-dockershim-and-cri-compatible-runtimes/">dockershimã®å‰Šé™¤ã¨CRIäº’æ›ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ä½¿ç”¨ã«é–¢ã™ã‚‹è¨˜äº‹ä¸€è¦§&lt;/a>ã®ä½œæˆã€‚
ã“ã®ãƒªã‚¹ãƒˆã«ã¯ã€ä¸Šã«ç¤ºã—ãŸæ–‡æ›¸ã®ä¸€éƒ¨ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ã¾ãŸã€å³é¸ã•ã‚ŒãŸå¤–éƒ¨ã®æƒ…å ±(ãƒ™ãƒ³ãƒ€ãƒ¼ã«ã‚ˆã‚‹ã‚¬ã‚¤ãƒ‰ã‚’å«ã‚€)ã‚‚ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="dockershimã¯ãªãœkubernetesã‹ã‚‰å‰Šé™¤ã•ã‚ŒãŸã®ã§ã™ã‹">dockershimã¯ãªãœKubernetesã‹ã‚‰å‰Šé™¤ã•ã‚ŒãŸã®ã§ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>Kubernetesã®åˆæœŸã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€ç‰¹å®šã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸Šã§ã®ã¿å‹•ä½œã—ã¾ã—ãŸã€‚
Docker Engineã§ã™ã€‚ãã®å¾Œã€Kubernetesã¯ä»–ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨é€£æºã™ã‚‹ãŸã‚ã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼(Kubernetesãªã©)ã¨å¤šãã®ç•°ãªã‚‹ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®é–“ã®ç›¸äº’é‹ç”¨ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã€
CRIæ¨™æº–ãŒ&lt;a href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/">ä½œæˆ&lt;/a>ã•ã‚Œã¾ã—ãŸã€‚
Docker Engineã¯ãã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹(CRI)ã‚’å®Ÿè£…ã—ã¦ã„ãªã„ãŸã‚ã€Kubernetesãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç§»è¡Œã‚’æ”¯æ´ã™ã‚‹ç‰¹åˆ¥ãªã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã€
ãã® &lt;em>dockershim&lt;/em> ã‚³ãƒ¼ãƒ‰ã‚’Kubernetesè‡ªèº«ã®ä¸€éƒ¨ã¨ã—ã¾ã—ãŸã€‚&lt;/p>
&lt;p>dockershimã‚³ãƒ¼ãƒ‰ã¯å¸¸ã«ä¸€æ™‚çš„ãªè§£æ±ºç­–ã§ã‚ã‚‹ã“ã¨ã‚’æ„å›³ã•ã‚Œã¦ã„ã¾ã—ãŸ(ã“ã®ãŸã‚shimã¨åä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™)ã€‚
ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã®è­°è«–ã‚„è¨ˆç”»ã«ã¤ã„ã¦ã¯ã€&lt;a href="https://github.com/kubernetes/enhancements/tree/master/keps/sig-node/2221-remove-dockershim">dockershimã®å‰Šé™¤ã«ã‚ˆã‚‹Kubernetesæ”¹è‰¯ã®ææ¡ˆ&lt;/a>ã«ã¦ãŠèª­ã¿ã„ãŸã ã‘ã¾ã™ã€‚&lt;/p>
&lt;p>å®Ÿéš›ã€dockershimã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã¯Kubernetesãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã«ã¨ã£ã¦å¤§ããªè² æ‹…ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚&lt;/p>
&lt;p>ã•ã‚‰ã«ã€dockershimã¨ã»ã¨ã‚“ã©äº’æ›æ€§ã®ãªã‹ã£ãŸæ©Ÿèƒ½ã€ãŸã¨ãˆã°cgroups v2ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ãªã©ãŒã€
ã“ã‚Œã‚‰ã®æ–°ã—ã„CRIãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚Kubernetesã‹ã‚‰dockershimã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®åˆ†é‡ã§ã®ã•ã‚‰ãªã‚‹é–‹ç™ºãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚&lt;/p>
&lt;h3 id="dockerã¨ã‚³ãƒ³ãƒ†ãƒŠã¯åŒã˜ã‚‚ã®ã§ã™ã‹">Dockerã¨ã‚³ãƒ³ãƒ†ãƒŠã¯åŒã˜ã‚‚ã®ã§ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>Dockerã¯Linuxã®ã‚³ãƒ³ãƒ†ãƒŠãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ™®åŠã•ã›ã€ãã®åŸºç›¤æŠ€è¡“ã®ç™ºå±•ã«å¯„ä¸ã—ã¦ãã¾ã—ãŸãŒã€
Linuxã®ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ãã®ã‚‚ã®ã¯ã‹ãªã‚Šä»¥å‰ã‹ã‚‰å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸã€ã‚³ãƒ³ãƒ†ãƒŠã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¯Dockerã‚’è¶…ãˆã¦ã‚ˆã‚Šåºƒç¯„ã«ç™ºå±•ã—ã¦ãã¾ã—ãŸã€‚
OCIã‚„CRIã®ã‚ˆã†ãªæ¨™æº–ã¯ã€Dockerã®æ©Ÿèƒ½ã®ä¸€éƒ¨ã‚’ç½®ãæ›ãˆãŸã‚Šã€æ—¢å­˜ã®æ©Ÿèƒ½ã‚’å¼·åŒ–ã—ãŸã‚Šã™ã‚‹ã“ã¨ã§ã€
ç§é”ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®å¤šãã®ãƒ„ãƒ¼ãƒ«ã®æˆé•·ã¨ç¹æ „ã‚’åŠ©ã‘ã¦ãã¾ã—ãŸã€‚&lt;/p>
&lt;h3 id="æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯å¼•ãç¶šãä½¿ãˆã‚‹ã®ã§ã™ã‹">æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯å¼•ãç¶šãä½¿ãˆã‚‹ã®ã§ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>ã¯ã„ã€&lt;code>docker build&lt;/code>ã‹ã‚‰ç”Ÿæˆã•ã‚Œã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€å…¨ã¦ã®CRIå®Ÿè£…ã§å‹•ä½œã—ã¾ã™ã€‚
æ—¢å­˜ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚å…¨ãåŒã˜ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ã€‚&lt;/p>
&lt;h3 id="ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯ã©ã†ã§ã—ã‚‡ã†ã‹">ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ&lt;/h3>
&lt;p>ã¯ã„ã€ã™ã¹ã¦ã®CRIãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯Kubernetesã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨åŒä¸€ã®pull secretsã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€
PodSpecã¾ãŸã¯Service Accountã‚’é€šã—ã¦åˆ©ç”¨ã§ãã¾ã™ã€‚&lt;/p>
&lt;h3 id="kubernetes-1-23ã§docker-engineã‚’å¼•ãç¶šãä½¿ç”¨ã§ãã¾ã™ã‹">Kubernetes 1.23ã§Docker Engineã‚’å¼•ãç¶šãä½¿ç”¨ã§ãã¾ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>ã¯ã„ã€1.20ã§å¤‰æ›´ã•ã‚ŒãŸã®ã¯ã€Docker Engineãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã«è­¦å‘Šãƒ­ã‚°ãŒ&lt;a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/">kubelet&lt;/a>èµ·å‹•æ™‚ã«å‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨ã ã‘ã§ã™ã€‚
ã“ã®è­¦å‘Šã¯ã€1.23ã¾ã§ã®ã™ã¹ã¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
dockershimã®å‰Šé™¤ã¯Kubernetes 1.24ã§è¡Œã‚ã‚Œã¾ã—ãŸã€‚&lt;/p>
&lt;p>Kubernetes v1.24ä»¥é™ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆã¯ã€&lt;a href="#can-i-still-use-docker-engine-as-my-container-runtime">Docker Engineã‚’å¼•ãç¶šãã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã—ã¦åˆ©ç”¨ã§ãã¾ã™ã‹ï¼Ÿ&lt;/a>ã‚’ã”è¦§ãã ã•ã„ã€‚
(CRIãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹Kubernetesãƒªãƒªãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€dockershimã‹ã‚‰åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚
ãƒªãƒªãƒ¼ã‚¹v1.24ã‹ã‚‰ã¯Kubernetesã«dockershimãŒå«ã¾ã‚Œãªããªã£ãŸãŸã‚ã€&lt;strong>å¿…ãš&lt;/strong>åˆ‡ã‚Šæ›¿ãˆãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“)ã€‚&lt;/p>
&lt;h3 id="ã©ã®criã®å®Ÿè£…ã‚’ä½¿ã†ã¹ãã§ã—ã‚‡ã†ã‹">ã©ã®CRIã®å®Ÿè£…ã‚’ä½¿ã†ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ&lt;/h3>
&lt;p>ã“ã‚Œã¯é›£ã—ã„è³ªå•ã§ã€æ§˜ã€…ãªè¦ç´ ã«ä¾å­˜ã—ã¾ã™ã€‚
ã‚‚ã—Docker EngineãŒã†ã¾ãå‹•ã„ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€containerdã«ç§»è¡Œã™ã‚‹ã®ã¯æ¯”è¼ƒçš„ç°¡å˜ã§ã€
æ€§èƒ½ã‚‚ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚‚ç¢ºå®Ÿã«æ”¹å–„ã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚
ã—ã‹ã—ã€ä»–ã®é¸æŠã®ã»ã†ãŒã‚ãªãŸã®ç’°å¢ƒã«ã‚ˆã‚Šé©åˆã™ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€
&lt;a href="https://landscape.cncf.io/card-mode?category=container-runtime&amp;amp;grouping=category">CNCF landscape&lt;/a>ã«ã‚ã‚‹ã™ã¹ã¦ã®é¸æŠè‚¢ã‚’æ¤œè¨ã•ã‚Œã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚&lt;/p>
&lt;h4 id="can-i-still-use-docker-engine-as-my-container-runtime">Docker Engineã‚’å¼•ãç¶šãã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã—ã¦åˆ©ç”¨ã§ãã¾ã™ã‹ï¼Ÿ&lt;/h4>
&lt;p>ç¬¬ä¸€ã«ã€ã”è‡ªèº«ã®PCã§é–‹ç™ºã‚„ãƒ†ã‚¹ãƒˆç”¨é€”ã§Dockerã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ä½•ã‚‚å¤‰ã‚ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
Kubernetesã§ã©ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ã£ã¦ã„ã¦ã‚‚ã€Dockerã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ä½¿ã„ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚³ãƒ³ãƒ†ãƒŠã§ã¯ã“ã®ã‚ˆã†ãªç›¸äº’é‹ç”¨æ€§ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚&lt;/p>
&lt;p>Mirantisã¨Dockerã¯ã€Kubernetesã‹ã‚‰å†…è”µã®dockershimãŒå‰Šé™¤ã•ã‚ŒãŸå¾Œã‚‚ã€
Docker Engineã®ä»£æ›¿ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ç¶­æŒã™ã‚‹ã“ã¨ã«&lt;a href="https://www.mirantis.com/blog/mirantis-to-take-over-support-of-kubernetes-dockershim-2/">ã‚³ãƒŸãƒƒãƒˆ&lt;/a>ã—ã¦ã„ã¾ã™ã€‚
ä»£æ›¿ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®åå‰ã¯&lt;a href="https://github.com/Mirantis/cri-dockerd">&lt;code>cri-dockerd&lt;/code>&lt;/a>ã§ã™ã€‚&lt;/p>
&lt;p>&lt;code>cri-dockerd&lt;/code>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€kubeletã‚’Docker Engineã«æ¥ç¶šã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
è©³ç´°ã«ã¤ã„ã¦ã¯ã€&lt;a href="https://kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim/migrate-dockershim-dockerd/">Migrate Docker Engine nodes from dockershim to cri-dockerd&lt;/a>ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚&lt;/p>
&lt;h3 id="ä»Šç¾åœ¨ã§ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã«ä»–ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ä¾‹ã¯ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹">ä»Šç¾åœ¨ã§ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã«ä»–ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ä¾‹ã¯ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ&lt;/h3>
&lt;p>Kubernetesãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿã¿å‡ºã—ãŸã™ã¹ã¦ã®æˆæœç‰©(Kubernetesãƒã‚¤ãƒŠãƒª)ã¯ã€ãƒªãƒªãƒ¼ã‚¹ã”ã¨ã«æ¤œè¨¼ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p>
&lt;p>ã¾ãŸã€&lt;a href="https://kind.sigs.k8s.io/">kind&lt;/a>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥å‰ã‹ã‚‰containerdã‚’ä½¿ã£ã¦ãŠã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ãŠã„ã¦å®‰å®šæ€§ãŒå‘ä¸Šã—ã¦ãã¦ã„ã¾ã™ã€‚
kindã¨containerdã¯ã€Kubernetesã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®å¤‰æ›´ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«æ¯æ—¥ä½•å›ã‚‚åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä»–ã®é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½ã£ã¦ãŠã‚Šã€ä»–ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®å®‰å®šæ€§ã¨ä½¿ã„ã‚„ã™ã•ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚
ä¾‹ã¨ã—ã¦ã€OpenShift 4.xã¯2019å¹´6æœˆä»¥é™ã€CRI-Oãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ä½¿ã£ã¦ã„ã¾ã™ã€‚&lt;/p>
&lt;p>ä»–ã®äº‹ä¾‹ã‚„å‚è€ƒè³‡æ–™ã¯ã«ã¤ã„ã¦ã¯ã€
containerdã¨CRI-O(Cloud Native Computing Foundation (&lt;a href="https://cncf.io">CNCF&lt;/a>)ã®2ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ )ã®æ¡ç”¨ä¾‹ã‚’ã”è¦§ãã ã•ã„ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/containerd/containerd/blob/master/ADOPTERS.md">containerd&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/cri-o/cri-o/blob/master/ADOPTERS.md">CRI-O&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ociã¨ã„ã†å˜èªã‚’ã‚ˆãè¦‹ã‚‹ã®ã§ã™ãŒ-ã“ã‚Œã¯ä½•ã§ã™ã‹">OCIã¨ã„ã†å˜èªã‚’ã‚ˆãè¦‹ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¯ä½•ã§ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>OCIã¯&lt;a href="https://opencontainers.org/about/overview/">Open Container Initiative&lt;/a>ã®ç•¥ã§ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ„ãƒ¼ãƒ«ã¨ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼é–“ã®æ•°å¤šãã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ¨™æº–åŒ–ã‚’è¡Œã£ãŸå›£ä½“ã§ã™ã€‚
å½¼ã‚‰ã¯ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã™ã‚‹ãŸã‚ã®æ¨™æº–ä»•æ§˜(OCI image-spec)ã¨ã€
ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®æ¨™æº–ä»•æ§˜(OCI runtime-spec)ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸã€&lt;a href="https://github.com/opencontainers/runc">runc&lt;/a>ã¨ã„ã†å½¢ã§runtime-specã®å®Ÿè£…ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ãŠã‚Šã€
ã“ã‚Œã¯&lt;a href="https://containerd.io/">containerd&lt;/a>ã¨&lt;a href="https://cri-o.io/">CRI-O&lt;/a>ã®ä¸¡æ–¹ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¸‹ä½ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ãªã£ã¦ã„ã¾ã™ã€‚
CRIã¯ã“ã‚Œã‚‰ã®ä½ãƒ¬ãƒ™ãƒ«ä»•æ§˜ã«åŸºã¥ã„ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®æ¨™æº–ã‚’æä¾›ã—ã¾ã™ã€‚&lt;/p>
&lt;h3 id="criå®Ÿè£…ã‚’å¤‰æ›´ã™ã‚‹éš›ã«æ³¨æ„ã™ã¹ãã“ã¨ã¯ä½•ã§ã™ã‹">CRIå®Ÿè£…ã‚’å¤‰æ›´ã™ã‚‹éš›ã«æ³¨æ„ã™ã¹ãã“ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>Dockerã¨ã»ã¨ã‚“ã©ã®CRI(containerdã‚’å«ã‚€)ã«ãŠã„ã¦ã€ä¸‹ä½ã§ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã‚³ãƒ¼ãƒ‰ã¯åŒã˜ã‚‚ã®ã§ã™ãŒã€
ã„ãã¤ã‹ã®ç´°ã‹ã„é•ã„ãŒå­˜åœ¨ã—ã¾ã™ã€‚ç§»è¡Œã™ã‚‹éš›ã«è€ƒæ…®ã™ã¹ãä¸€èˆ¬çš„ãªäº‹é …ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚&lt;/p>
&lt;ul>
&lt;li>ãƒ­ã‚°è¨­å®š&lt;/li>
&lt;li>ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®åˆ¶é™&lt;/li>
&lt;li>ãƒãƒ¼ãƒ‰æ§‹æˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã§dockerã‚³ãƒãƒ³ãƒ‰ã‚„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚½ã‚±ãƒƒãƒˆçµŒç”±ã§Docker Engineã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®&lt;/li>
&lt;li>&lt;code>kubectl&lt;/code>ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§&lt;code>docker&lt;/code> CLIã¾ãŸã¯Docker Engineã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚½ã‚±ãƒƒãƒˆãŒå¿…è¦ãªã‚‚ã®&lt;/li>
&lt;li>Kubernetesãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ„ãƒ¼ãƒ«ã§Docker Engineã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªã‚‚ã®(ä¾‹:å»ƒæ­¢ã•ã‚ŒãŸ&lt;code>kube-imagepuller&lt;/code>ãƒ„ãƒ¼ãƒ«)&lt;/li>
&lt;li>&lt;code>registry-mirrors&lt;/code>ã‚„insecureãƒ¬ã‚¸ã‚¹ãƒˆãƒªãªã©ã®æ©Ÿèƒ½ã®è¨­å®š&lt;/li>
&lt;li>ãã®ä»–ã®æ”¯æ´ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ãƒ‡ãƒ¼ãƒ¢ãƒ³ã§Docker EngineãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¦Kuberneteså¤–ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚‚ã®(ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãªã©)&lt;/li>
&lt;li>GPUã¾ãŸã¯ç‰¹åˆ¥ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã€ãã—ã¦ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŠã‚ˆã³Kubernetesã¨ãã‚Œã‚‰ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®çµ±åˆæ–¹æ³•&lt;/li>
&lt;/ul>
&lt;p>ã‚ãªãŸãŒKubernetesã®ãƒªã‚½ãƒ¼ã‚¹è¦æ±‚/åˆ¶é™ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ­ã‚°åé›†DaemonSetã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€ãã‚Œã‚‰ã¯å•é¡Œãªãå‹•ä½œã—ç¶šã‘ã¾ã™ãŒã€
&lt;code>dockerd&lt;/code>ã®è¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ãŸå ´åˆã¯ã€ãã‚Œã‚’æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«é©åˆã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p>
&lt;p>ä»–ã«æ³¨æ„ã™ã‚‹ã“ã¨ã¨ã—ã¦ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ãªã‚‚ã®ã‚„ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã†ãªã‚‚ã®ãŒå‹•ä½œã—ãªããªã‚Šã¾ã™ã€‚
å‰è€…ã®å ´åˆã¯ã€&lt;a href="https://github.com/kubernetes-sigs/cri-tools">&lt;code>crictl&lt;/code>&lt;/a>ãƒ„ãƒ¼ãƒ«ã‚’drop-inã®ç½®ãæ›ãˆã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™(&lt;a href="https://kubernetes.io/ja/docs/tasks/debug/debug-cluster/crictl/#docker-cli%E3%81%8B%E3%82%89crictl%E3%81%B8%E3%81%AE%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0">docker cliã‹ã‚‰crictlã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°&lt;/a>ã‚’å‚ç…§)ã€‚
å¾Œè€…ã®å ´åˆã¯ã€&lt;a href="https://github.com/genuinetools/img">img&lt;/a>ã€&lt;a href="https://github.com/containers/buildah">buildah&lt;/a>ã€&lt;a href="https://github.com/GoogleContainerTools/kaniko">kaniko&lt;/a>ã€&lt;a href="https://github.com/vmware-tanzu/buildkit-cli-for-kubectl">buildkit-cli-for-kubectl&lt;/a>ã®ã‚ˆã†ãªDockerã‚’å¿…è¦ã¨ã—ãªã„æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰ã®é¸æŠè‚¢ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚&lt;/p>
&lt;p>containerdã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€&lt;a href="https://github.com/containerd/cri/blob/master/docs/registry.md">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a>ã‚’å‚ç…§ã—ã¦ã€ç§»è¡Œã™ã‚‹ã®ã«ã©ã®ã‚ˆã†ãªæ§‹æˆãŒåˆ©ç”¨å¯èƒ½ã‹ã‚’ç¢ºèªã™ã‚‹ã¨ã“ã‚ã‹ã‚‰å§‹ã‚ã‚‹ã¨ã„ã„ã§ã—ã‚‡ã†ã€‚&lt;/p>
&lt;p>containerdã¨CRI-Oã‚’Kubernetesã§ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã«é–¢ã—ã¦ã¯ã€&lt;a href="https://kubernetes.io/ja/docs/setup/production-environment/container-runtimes/">ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ &lt;/a>ã«é–¢ã™ã‚‹Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚&lt;/p>
&lt;h3 id="ã•ã‚‰ã«è³ªå•ãŒã‚ã‚‹å ´åˆã©ã†ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã‹">ã•ã‚‰ã«è³ªå•ãŒã‚ã‚‹å ´åˆã©ã†ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ&lt;/h3>
&lt;p>ãƒ™ãƒ³ãƒ€ãƒ¼ã‚µãƒãƒ¼ãƒˆã®Kubernetesãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€å½¼ã‚‰ã®è£½å“ã«å¯¾ã™ã‚‹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰è¨ˆç”»ã«ã¤ã„ã¦å°‹ã­ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«é–¢ã—ã¦ã¯ã€&lt;a href="https://discuss.kubernetes.io/">ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ•ã‚©ãƒ¼ãƒ©ãƒ &lt;/a>ã«æŠ•ç¨¿ã—ã¦ãã ã•ã„ã€‚&lt;/p>
&lt;p>dockershimã®å‰Šé™¤ã«é–¢ã™ã‚‹æ±ºå®šã«ã¤ã„ã¦ã¯ã€å°‚ç”¨ã®&lt;a href="https://github.com/kubernetes/kubernetes/issues/106917">GitHub issue&lt;/a>ã§è­°è«–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p>
&lt;p>å¤‰æ›´ç‚¹ã«é–¢ã™ã‚‹ã‚ˆã‚Šè©³ç´°ãªæŠ€è¡“çš„ãªè­°è«–ã¯ã€&lt;a href="https://dev.to/inductor/wait-docker-is-deprecated-in-kubernetes-now-what-do-i-do-e4m">å¾…ã£ã¦ãã ã•ã„ã€Dockerã¯Kubernetesã§éæ¨å¥¨ã«ãªã£ãŸã®ã§ã™ã‹ï¼Ÿ&lt;/a>ã¨ã„ã†ç´ æ™´ã‚‰ã—ã„ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚&lt;/p>
&lt;h3 id="dockershimã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’æ¤œå‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã‹">dockershimã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’æ¤œå‡ºã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>ã¯ã„ï¼&lt;a href="https://github.com/aws-containers/kubectl-detector-for-docker-socket">Detector for Docker Socket (DDS)&lt;/a>ã¨ã„ã†kubectlãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã‚ãªãŸã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ç¢ºèªã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚
DDSã¯ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªKubernetesãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ãŒDocker Engineã‚½ã‚±ãƒƒãƒˆ(&lt;code>docker.sock&lt;/code>)ã‚’ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã—ã¦ã„ã‚‹ã‹ã‚’æ¤œå‡ºã§ãã¾ã™ã€‚
ã•ã‚‰ãªã‚‹è©³ç´°ã¨ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ã¯ã€DDSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®&lt;a href="https://github.com/aws-containers/kubectl-detector-for-docker-socket">README&lt;/a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚&lt;/p>
&lt;h3 id="ãƒã‚°ã—ã¦ã„ãŸã ã‘ã¾ã™ã‹">ãƒã‚°ã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ&lt;/h3>
&lt;p>ã¯ã„ã€ç§é”ã¯å¼•ãç¶šãã„ã¤ã§ã‚‚ãƒã‚°ã«å¿œã˜ã¦ã„ã¾ã™ã€‚ğŸ¤—ğŸ¤—ğŸ¤—&lt;/p></description></item><item><title>Blog: Don't Panic: Kubernetes and Docker</title><link>https://kubernetes.io/ja/blog/2020/12/02/dont-panic-kubernetes-and-docker/</link><pubDate>Wed, 02 Dec 2020 00:00:00 +0000</pubDate><guid>https://kubernetes.io/ja/blog/2020/12/02/dont-panic-kubernetes-and-docker/</guid><description>
&lt;p>&lt;strong>è‘—è€…:&lt;/strong> Jorge Castro, Duffie Cooley, Kat Cosgrove, Justin Garrison, Noah Kantrowitz, Bob Killen, Rey Lejano, Dan â€œPOPâ€ Papandrea, Jeffrey Sica, Davanum â€œDimsâ€ Srinivas&lt;/p>
&lt;p>Kubernetesã¯v1.20ã‚ˆã‚Šæ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã—ã¦&lt;a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.20.md#deprecation">Dockerã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã›ã‚“&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;strong>ãƒ‘ãƒ‹ãƒƒã‚¯ã‚’èµ·ã“ã™å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã¯ãã‚Œã»ã©æŠœæœ¬çš„ãªã‚‚ã®ã§ã¯ãªã„ã®ã§ã™ã€‚&lt;/strong>&lt;/p>
&lt;p>æ¦‚è¦: ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã—ã¦ã®Dockerã¯ã€Kubernetesã®ãŸã‚ã«é–‹ç™ºã•ã‚ŒãŸ&lt;a href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/">Container Runtime Interface(CRI)&lt;/a>ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’é¸ã‚“ã çµæœã¨ã—ã¦ã‚µãƒãƒ¼ãƒˆã•ã‚Œãªããªã‚Šã¾ã™ã€‚ã—ã‹ã—ã€Dockerã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã“ã‚Œã‹ã‚‰ã‚‚ã€ä»Šã¾ã§ã‚‚ãã†ã ã£ãŸã‚ˆã†ã«ã€ã¿ãªã•ã‚“ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§ä½¿ç”¨å¯èƒ½ã§ã™ã€‚&lt;/p>
&lt;p>ã‚‚ã—ã€ã‚ãªãŸãŒKubernetesã®ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚ã‚‹ãªã‚‰ã°ã€å¤šãã®å¤‰åŒ–ã¯ãªã„ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã¯Dockerã®æ­»ã‚’æ„å‘³ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã—ã€é–‹ç™ºãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ä»Šå¾ŒDockerã‚’ä½¿ç”¨ã™ã‚‹ã¹ãã§ãªã„ã€ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„ã¨è¨€ã£ã¦ã„ã‚‹ã®ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚Dockerã¯ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã™ã‚‹ã®ã«ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã—ã€docker buildã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆã•ã‚ŒãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã¯Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ä¸Šã§ã“ã‚Œã‹ã‚‰ã‚‚å‹•ä½œå¯èƒ½ãªã®ã§ã™ã€‚&lt;/p>
&lt;p>ã‚‚ã—ã€GKEã€EKSã€AKSã¨ã„ã£ãŸãƒãƒãƒ¼ã‚¸ãƒ‰Kubernetesã‚µãƒ¼ãƒ“ã‚¹(ãã‚Œã‚‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§&lt;a href="https://github.com/Azure/AKS/releases/tag/2020-11-16">containerdã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™&lt;/a>)ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ãªã‚‰ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰ãŒã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ã€Dockerã®ã‚µãƒãƒ¼ãƒˆãŒå°†æ¥ã®K8sãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§åˆ‡ã‚Œã‚‹å‰ã«ç¢ºèªã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
ã‚‚ã—ã€ãƒãƒ¼ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ã‚‹ã®ãªã‚‰ã€ç’°å¢ƒã‚„Runtimeã®ä»•æ§˜ã«åˆã‚ã›ã¦æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ç¢ºèªã—ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®ãŸã‚ã®é©åˆ‡ãªãƒ†ã‚¹ãƒˆã¨è¨ˆç”»ã‚’ç«‹ã¦ã¦ãã ã•ã„ã€‚&lt;/p>
&lt;p>ã‚‚ã—ã€ã”è‡ªèº«ã§Clusterã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã®ãªã‚‰ã€ã‚„ã¯ã‚Šå•é¡ŒãŒç™ºç”Ÿã™ã‚‹å‰ã«å¿…è¦ãªå¯¾å¿œã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚v1.20ã®æ™‚ç‚¹ã§ã€Dockerã®ä½¿ç”¨ã«ã¤ã„ã¦ã®è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚å°†æ¥ã®Kubernetesãƒªãƒªãƒ¼ã‚¹(ç¾åœ¨ã®è¨ˆç”»ã§ã¯2021å¹´ä¸‹æ—¬ã®v1.22)ã§Dockerã®Runtimeã¨ã—ã¦ã®ä½¿ç”¨ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œãªããªã‚Œã°ã€containerdã‚„CRI-Oã¨ã„ã£ãŸä»–ã®ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã®Runtimeã«åˆ‡ã‚Šæ›¿ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚åˆ‡ã‚Šæ›¿ãˆã‚‹éš›ã€ãã®RuntimeãŒç¾åœ¨ä½¿ç”¨ã—ã¦ã„ã‚‹Docker Daemonã®è¨­å®šã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚(Loggingãªã©)&lt;/p>
&lt;h2 id="ã§ã¯-ãªãœæ··ä¹±ãŒç”Ÿã˜-èª°ã‚‚ãŒææ€–ã«é§†ã‚‰ã‚Œã¦ã„ã‚‹ã®ã‹">ã§ã¯ã€ãªãœæ··ä¹±ãŒç”Ÿã˜ã€èª°ã‚‚ãŒææ€–ã«é§†ã‚‰ã‚Œã¦ã„ã‚‹ã®ã‹ã€‚&lt;/h2>
&lt;p>ã“ã“ã§è­°è«–ã«ãªã£ã¦ã„ã‚‹ã®ã¯2ã¤ã®ç•°ãªã‚‹å ´é¢ã«ã¤ã„ã¦ã§ã‚ã‚Šã€ãã‚ŒãŒæ··ä¹±ã®åŸå› ã«ãªã£ã¦ã„ã¾ã™ã€‚Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®å†…éƒ¨ã§ã¯ã€Container runtimeã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ãŒã‚ã‚Šã€ãã‚Œã¯Imageã‚’Pullã—èµ·å‹•ã™ã‚‹å½¹ç›®ã‚’æŒã£ã¦ã„ã¾ã™ã€‚Dockerã¯ãã®é¸æŠè‚¢ã¨ã—ã¦äººæ°—ãŒã‚ã‚Šã¾ã™(ä»–ã«ã¯containerdã‚„CRI-OãŒæŒ™ã’ã‚‰ã‚Œã¾ã™)ãŒã€ã—ã‹ã—Dockerã¯ãã‚Œè‡ªä½“ãŒKubernetesã®ä¸€éƒ¨ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚ŒãŒå•é¡Œã®åŸå› ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p>
&lt;p>ãŠåˆ†ã‹ã‚Šã‹ã¨æ€ã„ã¾ã™ãŒã€ã“ã“ã§â€Dockerâ€ã¨å‘¼ã‚“ã§ã„ã‚‹ã‚‚ã®ã¯ã€ã‚ã‚‹1ã¤ã®ã‚‚ã®ã§ã¯ãªãã€ãã®æŠ€è¡“çš„ãªä½“ç³»ã®å…¨ä½“ã§ã‚ã‚Šã€ãã®ä¸€éƒ¨ã«ã¯&amp;quot;containerd&amp;quot;ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã€ã“ã‚Œã¯ãã‚Œè‡ªä½“ãŒãƒã‚¤ãƒ¬ãƒ™ãƒ«ãªContainer runtimeã¨ãªã£ã¦ã„ã¾ã™ã€‚Dockerã¯ç´ æ™´ã‚‰ã—ã„ã‚‚ã®ã§ã€ä¾¿åˆ©ã§ã™ã€‚ãªãœãªã‚‰ã€å¤šãã®UXã®æ”¹å–„ãŒã•ã‚Œã¦ãŠã‚Šã€ãã‚Œã¯äººé–“ãŒé–‹ç™ºã‚’è¡Œã†ãŸã‚ã®æ“ä½œã‚’ç°¡å˜ã«ã—ã¦ã„ã‚‹ã®ã§ã™ã€‚ã—ã‹ã—ã€ãã‚Œã‚‰ã¯Kubernetesã«å¿…è¦ãªã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Kubernetesã¯äººé–“ã§ã¯ãªã„ã‹ã‚‰ã§ã™ã€‚
ã“ã®human-friendlyãªæŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãŒä½œã‚‰ã‚Œã¦ãŸã‚ã«ã€çµæœã¨ã—ã¦ã¯Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯Dockershimã¨å‘¼ã°ã‚Œã‚‹ã»ã‹ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„ã€æœ¬å½“ã«å¿…è¦ãªæ©Ÿèƒ½ã¤ã¾ã‚Šcontainerdã‚’åˆ©ç”¨ã—ã¦ãã¾ã—ãŸã€‚ã“ã‚Œã¯ç´ æ™´ã‚‰ã—ã„ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€æˆ‘ã€…ãŒãƒ¡ãƒ³ãƒ†ã™ã‚‹å¿…è¦ã®ã‚ã‚‹ã‚‚ã®ãŒå¢—ãˆã¾ã™ã—ã€ãã‚Œã¯å•é¡ŒãŒç™ºç”Ÿã™ã‚‹è¦å› ã¨ã‚‚ãªã‚Šã¾ã™ã€‚ä»Šå›ã®å¤‰æ›´ã§å®Ÿéš›ã«è¡Œã‚ã‚Œã‚‹ã“ã¨ã¨ã„ã†ã®ã¯ã€Dockershimã‚’æœ€ã‚‚æ—©ã„å ´åˆã§v1.23ã®ãƒªãƒªãƒ¼ã‚¹ã§kubeletã‹ã‚‰é™¤å¤–ã™ã‚‹ã“ã¨ã§ã™ã€‚ãã®çµæœã¨ã—ã¦ã€Dockerã®ã‚µãƒãƒ¼ãƒˆãŒãªããªã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã™ã€‚
ã“ã“ã§ã€containerdãŒDockerã«å«ã¾ã‚Œã¦ã„ã‚‹ãªã‚‰ã€ãªãœDockershimãŒå¿…è¦ãªã®ã‹ã¨ç–‘å•ã«æ€ã‚ã‚Œã‚‹æ–¹ã‚‚ã„ã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p>
&lt;p>Dockerã¯CRI(&lt;a href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/">Container Runtime Interface&lt;/a>)ã«æº–æ‹ ã—ã¦ã„ã¾ã›ã‚“ã€‚ã‚‚ã—ãã†ã§ã‚ã‚Œã°shimã¯å¿…è¦ãªã„ã®ã§ã™ãŒã€ç¾å®Ÿã¯ãã†ã§ã‚ã‚Šã¾ã›ã‚“ã€‚
ã—ã‹ã—ã€ã“ã‚Œã¯ä¸–ç•Œã®çµ‚ã‚ã‚Šã§ã‚ã‚Šã¾ã›ã‚“ã€å¿ƒé…ã—ãªã„ã§ãã ã•ã„ã€‚ã¿ãªã•ã‚“ã¯Container runtimeã‚’Dockerã‹ã‚‰ä»–ã®ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã§ã‚ã‚‹Container runtimeã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ã§ã‚ˆã„ã®ã§ã™ã€‚&lt;/p>
&lt;p>1ã¤æ³¨æ„ã™ã¹ãã“ã¨ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§è¡Œã‚ã‚Œã‚‹å‡¦ç†ã®ãªã‹ã§Docker socket(&lt;code>/var/run/docker.sock&lt;/code>)ã«ä¾å­˜ã™ã‚‹éƒ¨åˆ†ãŒã‚ã‚‹å ´åˆã€ä»–ã®Runtimeã¸åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã“ã®éƒ¨åˆ†ãŒåƒã‹ãªããªã‚‹ã§ã—ã‚‡ã†ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã—ã°ã—ã°Docker in Dockerã¨å‘¼ã°ã‚Œã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã®å¯¾å¿œæ–¹æ³•ã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚&lt;a href="https://github.com/GoogleContainerTools/kaniko">kaniko&lt;/a>ã€&lt;a href="https://github.com/genuinetools/img">img&lt;/a>ã€&lt;a href="https://github.com/containers/buildah">buildah&lt;/a>ãªã©ã§ã™ã€‚&lt;/p>
&lt;h2 id="ã§ã¯é–‹ç™ºè€…ã«ã¨ã£ã¦-ã“ã®å¤‰æ›´ã¯ä½•ã‚’æ„å‘³ã™ã‚‹ã®ã‹-ã“ã‚Œã‹ã‚‰ã‚‚dockerfileã‚’ä½¿ã£ã¦ã‚ˆã„ã®ã‹-ã“ã‚Œã‹ã‚‰ã‚‚dockerã§ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã£ã¦ã‚ˆã„ã®ã‹">ã§ã¯é–‹ç™ºè€…ã«ã¨ã£ã¦ã€ã“ã®å¤‰æ›´ã¯ä½•ã‚’æ„å‘³ã™ã‚‹ã®ã‹ã€‚ã“ã‚Œã‹ã‚‰ã‚‚Dockerfileã‚’ä½¿ã£ã¦ã‚ˆã„ã®ã‹ã€‚ã“ã‚Œã‹ã‚‰ã‚‚Dockerã§ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã£ã¦ã‚ˆã„ã®ã‹ã€‚&lt;/h2>
&lt;p>ã“ã®å¤‰æ›´ã¯ã€Dockerã‚’ç›´æ¥æ“ä½œã—ã¦ã„ã‚‹å¤šãã®ã¿ãªã•ã‚“ã¨ã¯åˆ¥ã®å ´é¢ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã§ã—ã‚‡ã†ã€‚
ã¿ãªã•ã‚“ãŒé–‹ç™ºã‚’è¡Œã†éš›ã«ä½¿ç”¨ã—ã¦ã„ã‚‹Dockerã¨ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®å†…éƒ¨ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹Docker runtimeã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚ŒãŒã‚ã‹ã‚Šã«ãã„ã“ã¨ã¯ç†è§£ã—ã¦ã„ã¾ã™ã€‚é–‹ç™ºè€…ã«ã¨ã£ã¦ã€Dockerã¯ã“ã‚Œã‹ã‚‰ã‚‚ä¾¿åˆ©ãªã‚‚ã®ã§ã‚ã‚Šã€ã“ã®ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãŒã‚ã£ãŸå‰ã¨å¤‰ã‚ã‚‰ãªã„ã§ã—ã‚‡ã†ã€‚Dockerã§ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸImageã¯ã€æ±ºã—ã¦Dockerã§ã ã‘å‹•ä½œã™ã‚‹ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã¯OCI(&lt;a href="https://opencontainers.org/">Open Container Initiative&lt;/a>) Imageã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚ã‚ã‚‰ã‚†ã‚‹OCIæº–æ‹ ã®Imageã¯ã€ãã‚Œã‚’ä½•ã®ãƒ„ãƒ¼ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã—ãŸã‹ã«ã‚ˆã‚‰ãšã€Kubernetesã‹ã‚‰è¦‹ã‚Œã°åŒã˜ã‚‚ã®ãªã®ã§ã™ã€‚&lt;a href="https://containerd.io/">containerd&lt;/a>ã‚‚&lt;a href="https://cri-o.io/">CRI-O&lt;/a>ã‚‚ã€ãã®ã‚ˆã†ãªImageã‚’Pullã—ã€èµ·å‹•ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã“ã‚ŒãŒã‚³ãƒ³ãƒ†ãƒŠã®ä»•æ§˜ã«ã¤ã„ã¦ã€å…±é€šã®ä»•æ§˜ã‚’ç­–å®šã—ã¦ã„ã‚‹ç†ç”±ãªã®ã§ã™ã€‚&lt;/p>
&lt;p>ã•ã¦ã€ã“ã®å¤‰æ›´ã¯æ±ºå®šã—ã¦ã„ã¾ã™ã€‚ã„ãã¤ã‹ã®å•é¡Œã¯ç™ºç”Ÿã™ã‚‹ã‹ã‚‚ã—ã¦ã¾ã›ã‚“ãŒã€æ±ºã—ã¦å£Šæ»…çš„ãªã‚‚ã®ã§ã¯ãªãã€ã»ã¨ã‚“ã©ã®å ´åˆã¯è‰¯ã„å¤‰åŒ–ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚Kubernetesã‚’ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ã«ã‚ˆã‚Šã¾ã™ãŒã€ã“ã®å¤‰æ›´ãŒç‰¹ã«ä½•ã®å½±éŸ¿ã‚‚åŠã¼ã•ãªã„äººã‚‚ã„ã‚‹ã§ã—ã‚‡ã†ã—ã€å½±éŸ¿ãŒã¨ã¦ã‚‚å°‘ãªã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚é•·æœŸçš„ã«è¦‹ã‚Œã°ã€ç‰©äº‹ã‚’ç°¡å˜ã«ã™ã‚‹ã®ã«å½¹ç«‹ã¤ã‚‚ã®ã§ã™ã€‚
ã‚‚ã—ã€ã“ã®å•é¡ŒãŒã¾ã ã‚ã‹ã‚Šã«ãã„ã¨ã—ã¦ã‚‚ã€å¿ƒé…ã—ãªã„ã§ãã ã•ã„ã€‚Kubernetesã§ã¯å¤šãã®ã‚‚ã®ãŒå¤‰åŒ–ã—ã¦ãŠã‚Šã€ãã®å…¨ã¦ã«å®Œç’§ã«ç²¾é€šã—ã¦ã„ã‚‹äººãªã©å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
çµŒé¨“ã®å¤šå¯¡ã‚„é›£æ˜“åº¦ã«ã‹ã‹ã‚ã‚‰ãšã€ã©ã‚“ãªã“ã¨ã§ã‚‚è³ªå•ã—ã¦ãã ã•ã„ã€‚æˆ‘ã€…ã®ç›®æ¨™ã¯ã€å…¨ã¦ã®äººãŒå°†æ¥ã®å¤‰åŒ–ã«ã¤ã„ã¦ã€å¯èƒ½ãªé™ã‚Šã®çŸ¥è­˜ã¨ç†è§£ã‚’å¾—ã‚‰ã‚Œã‚‹ã“ã¨ã§ã™ã€‚
ã“ã®ãƒ–ãƒ­ã‚°ãŒå¤šãã®è³ªå•ã®ç­”ãˆã¨ãªã‚Šã€ä¸å®‰ã‚’å’Œã‚‰ã’ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã¨é¡˜ã£ã¦ã„ã¾ã™ã€‚&lt;/p>
&lt;p>åˆ¥ã®æƒ…å ±ã‚’ãŠæ¢ã—ã§ã‚ã‚Œã°ã€&lt;a href="https://kubernetes.io/ja/dockershim">dockershimã®å‰Šé™¤ã«é–¢ã™ã‚‹FAQ&lt;/a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚&lt;/p></description></item></channel></rss>